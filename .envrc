while IFS= read -r f; do
    watch_file "${f#./}"
done <<< "$(find . -name "*.nix")"

use flake

if ! [ -f .git/hooks/pre-commit ]; then
    pre-commit install
fi